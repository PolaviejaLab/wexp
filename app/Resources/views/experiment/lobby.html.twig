{% extends 'base.html.twig' %}

{% block body %}

<script>
	var responseSink = "{{ path('experiment_sink', {'id': player.experiment.id, 'player': player.id}) }}";
	var eventSource = "{{ path('experiment_sse', {'id': player.experiment.id, 'player': player.id}) }}";
	
{% if responses %}
	var responses = {{ responses|raw }};
{% else %}
	var responses = {};
{% endif %}	
</script>

<div ng-controller="ExperimentController">

	{% for screen in screens %}
		<div ng-show="isVisible({{ screen.id }}, '{{ screen.name }}')">
			{% render(controller('AppBundle:Screen:compile', {'experiment_id': player.experiment.id, 'screen_name': screen.name})) %}
		</div>	
	{% endfor %}

</div>

{% endblock %}